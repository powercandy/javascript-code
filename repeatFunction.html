<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport"
	      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Document</title>
</head>
<body>
<div>
	<p><b>定义这样一个函数</b></p>
	<p>function doRepeat(func, times, wait) {</p>
	<p>}</p>
	<p>参数分别是需要 repeat的函数， repeat的次数，每次repeat的间隔</p>
	<p>使用方式如下</p>
	<p>调用这个函数能返回一个新函数</p>
	<p>,比如传入的是alert</p>
	<p>var repeatedFun = doRepeat(alert, 10, 5000);</p>
	<p>调用返回的这个新函数，如: repeatFun("hellworld");</p>
	<p>会依次alert十次 helloworld，每次间隔5秒</p>
</div>
<script>

function doRepeat (callback,times,wait){
	var index = 0;
	function repeatFun(){
		var _arguments = arguments;
		setTimeout(function(){
			index++;
			if(index > times){
				return;
			}else{
				console.log(index);
//				_arguments.callee();
				repeatFun(_arguments[0]);
				callback(_arguments[0]);
			}
		},wait)

	}
	return repeatFun;
};
var repeatedFun = doRepeat(console.log,4,1000);
repeatedFun("hello");


//function repeat (func, times, wait) {
//	console.log(1)
//	function repeatImpl(){
//		var handle,
//			_arguments = arguments,
//			i = 0;
//		handle = setInterval(function(){
//			i = i + 1;
//			//到达指定次数取消定时器
//			if(i > times){
//				clearInterval(handle);
//				return;
//			}
//			func(_arguments[0]);
//		},wait);
//	}
//
//	return repeatImpl;
//}
//
//var repeatFun = repeat(console.log, 4, 1000);
//repeatFun("hellworld");

</script>

</body>
</html>